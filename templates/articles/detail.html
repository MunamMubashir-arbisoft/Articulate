{% extends 'base.html' %}
{% load article_tags %}
{% block headtitle %}{{ article.title }}{% endblock %}
{% block content %}
<div class="row d-flex justify-content-center border-bottom pt-3 mb-3 bg-dark">
    <div class="col-12 article-banner">
        <div class="title text-center text-capitalize mb-4">
            <h2 class="article-title text-light"> {{ article.title }}</h2>
        </div>
    </div>
    <div class="col-12 text-center mb-2">
        <img src="http://i.imgur.com/Qr71crq.jpg" style="vertical-align:middle;width: 80px;height: 80px;border-radius: 50%;" class="avatar" />
    </div>
    <div class="col-7 text-center text-light">
        By @<a class="text-primary" href="#">{{article.author}}</a>
    </div>
    <div class="col-7 text-center text-light">
        <p>Posted at <i class="text-secondary">{{ article.created_at|date:"D d F Y f A" }}</i></p>
    </div>
    <div class="col-7 text-light text-center mt-3 mb-4">
        {% if article.tags %}
        Tags:
        {% for tag in article.tags.all %}
        <a class="text-primary" href="{% url "articles:article_list_by_tag" tag.slug %}">
            {{ tag.name }}
        </a>
        {% if not forloop.last %}, {% endif %}
        {% endfor %}
        {% endif %}
    </div>
</div>

<div class="row d-d-flex justify-content-center">
    <div class="col-5 mb-5 mt-4">
        <img class="img-fluid rounded mx-auto d-block"
            src="https://colorlib.com/preview/theme/readit/images/image_1.jpg" alt="">
    </div>
</div>

<div class="row d-flex justify-content-center border-bottom border-top pb-3">
    <div class="col-5 description text-center text-secondary mt-3 mb-5">
        <h4> {{ article.description }}</h4>
    </div>
    <div class="col-8">
        <p>{{ article.content|markdown}} </p>
    </div>
</div>
<div class="container mt-3 mb-4">
    <div class="row p-2 d-flex justify-content-center">
            <div class=" text-center col-3 py-4 px-3 mb-5 mt-3 border">
                <h2 class="article-title ">Comments</h2>
            </div>
            <div class="col-12">
            {% include "components/form.html" with form_method="post" form=comment_form button_text="Add comment"%}
            </div>
                {% for comment in comments %}
                <div class="col-12 border rounded mx-auto px-4 py-2 mb-3">
                    <p class="comment-text">
                        {{ comment.body|linebreaks }}
                    </p>
                    <p class="info">
                        <a href="#"><mark class="text-primary">{{ article.author}}</a> </mark> <span class="text-secondary">at
                            {{ comment.created_at}}</span>
                    </p>
                </div>
                {% empty %}
                <div class="mt-3">
                    <p>There are no comments yet.</p>
                </div>
        </div>
    </div>
</div>
{% endfor %}
{% include "components/pagination.html" with page=comments %}



<div class="container">
    <div class="row d-flex justify-content-center">
        {% if similar_articles %}
        <div class="py-4 px-3 mb-5 mt-5 border">
            <h2 class="text-center">Recommended articles</h2>
        </div>
        {% endif %}
        {% for article in similar_articles %}
        {% include "components/card.html" with article=article %}
        {% empty %}
        {% endfor %}
    </div>
</div>
{% endblock content %}